      @import url("https://fonts.cdnfonts.com/css/ocr-a-std");
      @import url("https://fonts.cdnfonts.com/css/ocr-b-std");
      @import url("https://fonts.cdnfonts.com/css/nk57-monospace");
      @import url("https://fonts.cdnfonts.com/css/profont");
      @import url("https://fonts.cdnfonts.com/css/terminus-ttf");

      :root {
        --font-display: "OCR A Std", "OCR A Extended", "Courier New", monospace;
        --font-secondary: "OCR B Std", "NK57 Monospace", "ProFontWindows",
          "Terminus (TTF)", monospace;
        --font-body: "NK57 Monospace", "OCR B Std", "ProFontWindows",
          "Terminus (TTF)", monospace;
        --font-micro: "ProFontWindows", "Terminus (TTF)", "OCR A Std",
          "Courier New", monospace;
        --font-title: "NK57 Monospace", "OCR B Std", "IBM Plex Mono", monospace;
        --safe-top: 0px;
        --header-height: 64px;
        --time-filter-height: 48px;
      }

      @supports (padding-top: env(safe-area-inset-top)) {
        :root {
          --safe-top: env(safe-area-inset-top);
        }
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Custom text selection */
      ::selection {
        background: rgba(255, 255, 255, 0.85);
        color: #050505;
      }
      ::-moz-selection {
        background: rgba(255, 255, 255, 0.85);
        color: #050505;
      }

      body {
        font-family: var(--font-body);
        background: #0a0a0a;
        overflow: hidden;
        height: 100vh;
        width: 100vw;
        position: relative;
      }

      /* Scan line effect */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
          0deg,
          rgba(0, 212, 255, 0.03),
          rgba(0, 212, 255, 0.03) 1px,
          transparent 1px,
          transparent 2px
        );
        pointer-events: none;
        z-index: 9999;
        animation: scan 8s linear infinite;
      }

      @keyframes scan {
        0% {
          transform: translateY(0);
        }
        100% {
          transform: translateY(4px);
        }
      }

      #map {
        height: 100vh;
        width: 100vw;
        margin-left: 0;
        position: fixed;
        z-index: 1;
        transition: width 0.3s ease, margin-left 0.3s ease;
        overflow: hidden; /* Prevent white space during zoom */
      }

      /* Ensure Leaflet map container doesn't show white space during zoom */
      .leaflet-container {
        background: #1a1a1a !important; /* Match dark theme background */
        outline: none;
      }

      .leaflet-zoom-animated {
        will-change: transform; /* Optimize zoom animations */
      }

      body.panel-open #map {
        width: calc(100vw - 400px);
        margin-left: 400px;
      }

      /* Header - Retro Terminal Style */
      .header {
        position: fixed;
        top: var(--safe-top);
        left: 0;
        right: 0;
        background: #0a0a0a;
        border-bottom: 3px solid #00d4ff;
        z-index: 1000;
        padding: 10px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-family: var(--font-display);
        box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
      }

      body.panel-open .header {
        left: 400px;
      }

      .header-title {
        color: #00d4ff;
        font-size: 10px;
        text-shadow: 0 0 10px #00d4ff;
        letter-spacing: 2px;
        font-family: var(--font-title);
      }

      .header-status {
        color: #00d4ff;
        font-size: 8px;
        animation: blink 1s infinite;
      }

      /* Info box/link */
      .info-link {
        position: fixed;
        top: calc(var(--safe-top) + var(--header-height) + 4px);
        right: 20px;
        background: rgba(10, 10, 10, 0.95);
        border: 2px solid #00d4ff;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        z-index: 999;
        text-decoration: none;
        color: #00d4ff;
        font-size: 11px;
        font-weight: bold;
        font-family: var(--font-secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.2s ease;
        box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
      }

      .info-link:hover {
        background: #00d4ff;
        color: #0a0a0a;
        box-shadow: 0 4px 20px rgba(0, 212, 255, 0.5);
      }

      .info-icon {
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid currentColor;
        border-radius: 0;
        font-size: 11px;
        font-weight: bold;
        font-family: var(--font-display);
      }

      @media (max-width: 768px) {
        .info-link {
          right: 10px;
          padding: 6px 10px;
          font-size: 10px;
        }

        .info-icon {
          width: 14px;
          height: 14px;
          font-size: 10px;
        }

        /* Mobile: show only the info icon, hide text */
        .info-link span:nth-child(2) {
          display: none !important;
        }
        .info-link {
          padding: 4px 6px !important;
          border-width: 2px !important;
        }
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }

      /* Statistics bar - Circuit board style */
      .stats-bar {
        position: fixed;
        top: calc(
          var(--safe-top) + var(--header-height) + var(--time-filter-height)
        );
        left: 0;
        right: 0;
        background: #0a0a0a;
        border-bottom: 2px solid #00d4ff;
        z-index: 999;
        padding: 12px 20px;
        display: flex;
        gap: 40px;
        justify-content: flex-start;
        align-items: center;
        font-family: var(--font-secondary);
      }

      body.panel-open .stats-bar {
        left: 400px;
      }

      .stat-item {
        text-align: left;
      }

      .stat-value {
        color: #00d4ff;
        font-size: 16px;
        font-weight: bold;
        display: block;
        text-shadow: 0 0 5px #00d4ff;
        font-family: var(--font-display);
      }

      .stat-label {
        color: #888;
        font-size: 9px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-top: 2px;
        font-family: var(--font-micro);
      }

      /* Side panel - Retro terminal */
      .side-panel {
        position: fixed;
        top: 0;
        left: 0;
        width: 400px;
        height: 100vh;
        background: #0a0a0a;
        border-right: 3px solid #00d4ff;
        z-index: 1001;
        overflow-y: auto;
        box-shadow: 4px 0 20px rgba(0, 212, 255, 0.3);
        display: none;
        font-family: var(--font-secondary);
      }

      .side-panel.active {
        display: block;
      }

      .side-panel-header {
        padding: 15px;
        border-bottom: 2px solid #00d4ff;
        background: #0a0a0a;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .side-panel-title {
        color: #00d4ff;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-family: var(--font-display);
      }

      .side-panel-content {
        padding: 15px;
        color: #00d4ff;
        line-height: 1.8;
        font-family: var(--font-secondary);
      }

      .info-item {
        padding: 10px 0;
        border-bottom: 1px solid rgba(0, 212, 255, 0.2);
      }

      .info-label {
        color: #888;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 5px;
        font-family: var(--font-micro);
      }

      .info-value {
        color: #00d4ff;
        font-size: 12px;
        font-weight: bold;
        text-shadow: 0 0 5px rgba(0, 212, 255, 0.5);
        font-family: var(--font-secondary);
      }

      /* Map controls */
      .map-controls {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(10, 10, 10, 0.95);
        border: 2px solid #00d4ff;
        padding: 10px;
        display: flex;
        gap: 8px;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
      }

      body.panel-open .map-controls {
        left: 450px;
      }

      /* Legend styles */
      .legend {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(10, 10, 10, 0.95);
        border: 2px solid #00d4ff;
        padding: 12px;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
        min-width: 180px;
        font-family: var(--font-secondary);
      }

      /* Keep legend docked right even when side panel is open */
      body.panel-open .legend {
        right: 20px;
      }

      .legend-header {
        color: #00d4ff;
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 8px;
        padding-bottom: 6px;
        border-bottom: 1px solid rgba(0, 212, 255, 0.3);
        font-family: var(--font-display);
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 8px 0;
      }

      .legend-marker {
        width: 12px;
        height: 12px;
        border-radius: 0;
      }

      .legend-text {
        color: #00d4ff;
        font-size: 11px;
        font-weight: bold;
        letter-spacing: 0.5px;
        font-family: var(--font-secondary);
      }

      .legend-text span {
        color: #00d4ff;
        text-shadow: 0 0 5px #00d4ff;
      }

      @media (max-width: 768px) {
        .legend {
          display: none !important;
        }
      }

      /* Custom marker cluster styling - Receipt/Ticket style */
      .marker-cluster {
        background: transparent !important;
        border: none !important;
        position: relative;
      }

      .marker-cluster div {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: linear-gradient(to bottom, #fafafa 0%, #f5f5f5 100%);
        border: 2px solid rgba(10, 10, 10, 0.8);
        border-radius: 6px 6px 3px 3px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4), 0 0 12px currentColor,
          inset 0 1px 0 rgba(255, 255, 255, 0.8),
          inset 0 -1px 0 rgba(0, 0, 0, 0.1);
        transform: rotate(-1deg);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .marker-cluster div::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 4px;
        background: repeating-linear-gradient(
          90deg,
          transparent 0px,
          transparent 3px,
          rgba(10, 10, 10, 0.6) 3px,
          rgba(10, 10, 10, 0.6) 5px
        );
      }

      .marker-cluster div::before {
        content: "";
        position: absolute;
        top: -2px;
        right: -2px;
        width: 8px;
        height: 8px;
        background: linear-gradient(
          135deg,
          rgba(10, 10, 10, 0.3) 0%,
          transparent 50%
        );
        clip-path: polygon(0 0, 100% 0, 0 100%);
      }

      .marker-cluster:hover div {
        transform: rotate(0deg) scale(1.1) translateY(-3px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5), 0 0 16px currentColor,
          inset 0 1px 0 rgba(255, 255, 255, 0.9);
        z-index: 10;
      }

      .marker-cluster span {
        display: block;
        color: #0a0a0a;
        font-weight: bold;
        font-family: var(--font-micro);
        text-shadow: none;
        line-height: 1.2;
        position: relative;
        z-index: 1;
      }

      .marker-cluster .cluster-count {
        font-size: 13px;
        font-weight: 900;
        letter-spacing: -0.3px;
        color: #0a0a0a;
      }

      .marker-cluster .cluster-amount {
        font-size: 9px;
        font-weight: 700;
        color: currentColor;
        margin-top: 2px;
        border-top: 1px dashed rgba(10, 10, 10, 0.3);
        padding-top: 2px;
        padding-left: 3px;
        padding-right: 3px;
      }

      .marker-cluster-small {
        width: 32px;
        height: 40px;
        color: #00d4ff;
      }

      .marker-cluster-small .cluster-count {
        font-size: 11px;
      }

      .marker-cluster-small .cluster-amount {
        font-size: 7px;
        padding-left: 2px;
        padding-right: 2px;
      }

      .marker-cluster-medium {
        width: 38px;
        height: 48px;
        color: #00d4ff;
      }

      .marker-cluster-medium .cluster-count {
        font-size: 14px;
      }

      .marker-cluster-medium .cluster-amount {
        font-size: 9px;
      }

      .marker-cluster-large {
        width: 44px;
        height: 56px;
        color: #00d4ff;
      }

      .marker-cluster-large .cluster-count {
        font-size: 16px;
      }

      .marker-cluster-large .cluster-amount {
        font-size: 10px;
      }

      .marker-cluster.cluster-high-amount {
        color: #ff0040;
      }

      .marker-cluster.cluster-medium-amount {
        color: #ff8000;
      }

      .control-btn {
        background: #0a0a0a;
        border: 2px solid #00d4ff;
        color: #00d4ff;
        font-size: 11px;
        font-weight: bold;
        padding: 8px 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-family: var(--font-display);
      }

      .control-btn:hover {
        background: #00d4ff;
        color: #0a0a0a;
        text-shadow: none;
      }

      .control-btn.active {
        background: #00d4ff;
        color: #0a0a0a;
      }

      /* Search dropdown/select styling */
      .select-control {
        background: #0a0a0a;
        border: 2px solid #00d4ff;
        color: #00d4ff;
        font-size: 10px;
        font-weight: bold;
        padding: 6px 12px;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-family: var(--font-secondary);
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
      }

      .search-input {
        background: #0a0a0a;
        border: 2px solid #00d4ff;
        color: #00d4ff;
        padding: 6px 8px;
        font-family: var(--font-secondary);
        font-size: 11px;
        letter-spacing: 0.5px;
      }

      .search-input::placeholder {
        color: #00d4ff;
        opacity: 0.45;
        font-family: var(--font-secondary);
        letter-spacing: 0.5px;
      }

      .search-input.highlight {
        box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
      }

      /* Dropdown chevron indicator */
      .select-wrap {
        position: relative;
        display: inline-block;
      }
      .select-wrap:after {
        content: "â–¾";
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        color: #00d4ff;
        pointer-events: none;
        font-weight: bold;
        text-shadow: 0 0 5px rgba(0, 212, 255, 0.5);
      }
      .select-control {
        padding-right: 28px; /* room for chevron */
      }

      /* Popup modal */
      .modal {
        display: none;
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0, 0, 0, 0.4);
        z-index: 2000;
        animation: fadeIn 0.3s ease;
      }

      .modal.active {
        display: flex;
        flex-direction: column;
      }

      .modal-content {
        background: rgba(20, 20, 20, 0.95);
        backdrop-filter: blur(40px);
        -webkit-backdrop-filter: blur(40px);
        border-radius: 0;
        padding: 24px;
        max-height: 70vh;
        overflow-y: auto;
        animation: slideUp 0.3s ease;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
      }

      .modal-title {
        color: #fff;
        font-size: 22px;
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      .close-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        color: #fff;
        width: 32px;
        height: 32px;
        border-radius: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 20px;
        transition: all 0.2s ease;
      }

      .close-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .modal-body {
        color: #fff;
      }

      .info-row {
        padding: 12px 0;
        border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
      }

      .info-row:last-child {
        border-bottom: none;
      }

      .info-label {
        color: rgba(255, 255, 255, 0.6);
        font-size: 13px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 4px;
      }

      .info-value {
        color: #fff;
        font-size: 17px;
        font-weight: 600;
      }

      /* Loading indicator - Flashing alarm style */
      .loading {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(10, 10, 10, 0.95);
        color: #00d4ff;
        padding: 20px 30px;
        border: 3px solid #00d4ff;
        border-radius: 0;
        z-index: 3000;
        font-size: 15px;
        font-weight: bold;
        font-family: var(--font-display);
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 0 0 10px #00d4ff;
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
          inset 0 0 20px rgba(0, 212, 255, 0.1);
        animation: alarmFlash 0.5s infinite;
      }

      @keyframes alarmFlash {
        0%,
        50% {
          border-color: #00d4ff;
          color: #00d4ff;
          text-shadow: 0 0 10px #00d4ff;
          box-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
            inset 0 0 20px rgba(0, 212, 255, 0.1);
        }
        51%,
        100% {
          border-color: #ff0040;
          color: #ff0040;
          text-shadow: 0 0 10px #ff0040;
          box-shadow: 0 0 20px rgba(255, 0, 64, 0.5),
            inset 0 0 20px rgba(255, 0, 64, 0.1);
        }
      }

      /* Time filter bar */
      .time-filter-bar {
        position: fixed;
        top: calc(var(--safe-top) + var(--header-height));
        left: 0;
        right: 0;
        background: #0a0a0a;
        border-bottom: 2px solid #00d4ff;
        z-index: 998;
        padding: 14px 20px 12px 20px;
        display: flex;
        gap: 12px;
        justify-content: flex-start;
        align-items: center;
      }

      body.panel-open .time-filter-bar {
        left: 400px;
      }

      .time-filter-label {
        color: #888;
        font-size: 9px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-right: 8px;
      }

      .time-filter-btn {
        background: #0a0a0a;
        border: 2px solid #00d4ff;
        color: #00d4ff;
        font-size: 10px;
        font-weight: bold;
        padding: 6px 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-family: var(--font-display);
      }

      .time-filter-btn:hover {
        background: #00d4ff;
        color: #0a0a0a;
        text-shadow: none;
        box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
      }

      .time-filter-btn.active {
        background: #00d4ff;
        color: #0a0a0a;
        box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
      }

      /* No results message - Flashing style */
      .no-results-message {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(10, 10, 10, 0.95);
        color: #00d4ff;
        padding: 20px 30px;
        border: 3px solid #00d4ff;
        border-radius: 0;
        z-index: 3000;
        font-size: 12px;
        font-weight: bold;
        font-family: var(--font-display);
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 0 0 10px #00d4ff;
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
          inset 0 0 20px rgba(0, 212, 255, 0.1);
        animation: alarmFlash 0.5s infinite;
        display: none;
        text-align: center;
      }

      .no-results-message.visible {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideUp {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      /* Hint flash animation (3 blinks) */
      @keyframes hintFlash {
        0% {
          opacity: 0;
        }
        20% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
        70% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      #searchHint.flash {
        animation: hintFlash 0.6s ease-in-out 3;
      }

      /* Custom marker styles - Minimal terminal dots */
      .custom-marker {
        width: 10px;
        height: 10px;
        cursor: pointer;
        transition: all 0.2s ease;
        background: transparent !important;
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      .custom-marker div {
        width: 100% !important;
        height: 100% !important;
        position: relative;
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
        box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.8), 3px 3px 0 rgba(0, 0, 0, 0.5);
        transform: skew(-2deg, -1deg);
      }

      .custom-marker:hover {
        transform: scale(1.5);
      }

      .custom-marker:hover div {
        box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.9), 5px 5px 0 rgba(0, 0, 0, 0.6),
          0 0 8px rgba(0, 212, 255, 0.5);
      }

      /* Custom popup style - Terminal aesthetic */
      .leaflet-popup-content-wrapper {
        background: #0a0a0a;
        border: 2px solid #00d4ff;
        border-radius: 0;
        color: #00d4ff;
        padding: 0;
        box-shadow: 0 0 20px rgba(0, 212, 255, 0.5),
          inset 0 0 20px rgba(0, 212, 255, 0.1);
      }

      .leaflet-popup-tip {
        background: #0a0a0a;
        border: 2px solid #00d4ff;
        border-top: none;
      }

      .leaflet-popup-content {
        margin: 0;
        padding: 12px 15px;
        line-height: 1.6;
        font-size: 11px;
        font-weight: bold;
        text-shadow: 0 0 5px rgba(0, 212, 255, 0.5);
      }

      .leaflet-popup-content strong {
        color: #00d4ff;
        display: block;
        margin-bottom: 6px;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .leaflet-popup-content br {
        display: block;
        margin: 4px 0;
      }

      .leaflet-container a.leaflet-popup-close-button {
        color: #00d4ff;
        padding: 8px;
        font-size: 18px;
        font-weight: bold;
        text-shadow: 0 0 5px #00d4ff;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
        right: 5px;
        top: 5px;
      }

      .leaflet-container a.leaflet-popup-close-button:hover {
        color: #0a0a0a;
        background: #00d4ff;
        text-shadow: none;
      }

      .citation-popup .leaflet-popup-content-wrapper {
        background: #fff;
        border-radius: 6px;
        border: 2px solid #0a0a0a;
        padding: 0;
        min-width: 220px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      }

      .citation-popup .leaflet-popup-content {
        margin: 0;
        padding: 0;
      }

      .citation-popup .leaflet-popup-tip {
        background: #fff;
        border: 2px solid #0a0a0a;
      }

      .citation-popup .leaflet-popup-close-button {
        color: #0a0a0a;
        padding: 6px;
        font-weight: 700;
      }

      .popup-receipt {
        background: repeating-linear-gradient(
            0deg,
            rgba(0, 0, 0, 0.04),
            rgba(0, 0, 0, 0.04) 2px,
            transparent 2px,
            transparent 24px
          ),
          #fff;
        padding: 16px 18px 18px 18px;
        font-family: var(--font-micro);
        color: #0a0a0a;
        text-transform: uppercase;
      }

      .popup-receipt .receipt-title {
        font-size: 13px;
        font-weight: 700;
        letter-spacing: 1px;
        padding-bottom: 10px;
        border-bottom: 2px dashed rgba(0, 0, 0, 0.2);
        margin-bottom: 10px;
      }

      .popup-receipt .receipt-row {
        display: flex;
        justify-content: space-between;
        gap: 8px;
        font-size: 11px;
        padding: 6px 0;
        border-bottom: 1px dashed rgba(0, 0, 0, 0.15);
      }

      .popup-receipt .receipt-row span:first-child {
        color: rgba(0, 0, 0, 0.45);
        letter-spacing: 0.5px;
      }

      .popup-receipt .receipt-row span:last-child {
        font-weight: 600;
      }

      .popup-receipt .receipt-row:last-child {
        border-bottom: none;
      }

      /* Mobile responsive styles */
      @media (max-width: 768px) {
        .header-title {
          font-size: 16px;
        }

        .time-filter-bar {
          padding: 8px 3px 8px 3px;
          gap: 4px;
        }

        .time-filter-btn {
          font-size: 9px !important;
          padding: 2px 7px !important;
          min-width: 34px !important;
          max-width: 44px;
          border-width: 2px !important;
          line-height: 12px;
          letter-spacing: 0.2px;
        }

        .stats-bar {
          font-size: 10px;
          padding: 8px 12px;
        }

        .stat-item {
          font-size: 11px;
        }

        .side-panel {
          width: 100%;
          position: fixed;
          left: 0;
          right: 0;
          height: 33vh; /* Take up about 1/3 of screen */
          bottom: -33vh; /* Start hidden below viewport */
          top: auto;
          border-right: none;
          border-top: 3px solid #00d4ff;
          z-index: 1001;
          transition: bottom 0.3s ease-out;
          display: block; /* Always rendered, just positioned off-screen */
          overflow-y: auto; /* Allow scrolling if content overflows */
          max-height: 33vh; /* Ensure it doesn't exceed viewport */
        }

        .side-panel.active {
          bottom: 0; /* Slide up to bottom of viewport */
        }

        /* On mobile, prevent layout shift when panel opens */
        body.panel-open #map {
          width: 100vw !important;
          margin-left: 0 !important;
        }

        body.panel-open .header {
          left: 0 !important;
        }

        body.panel-open .stats-bar {
          left: 0 !important;
        }

        body.panel-open .time-filter-bar {
          left: 0 !important;
        }

        #map {
          width: 100vw;
          height: 100vh;
          margin-left: 0;
        }

        .map-controls {
          left: 10px;
          bottom: 10px;
          flex-direction: column;
          gap: 8px;
          transition: bottom 0.3s ease-out, left 0.3s ease-out,
            right 0.3s ease-out, width 0.3s ease-out, padding 0.3s ease-out;
          width: auto;
        }

        .map-controls .control-btn {
          transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }

        /* When panel is active on mobile, move controls up and slide to horizontal layout */
        body.mobile-panel-open .map-controls {
          bottom: calc(33vh + 10px);
          flex-direction: row;
          /* Keep same container size - just change layout direction */
        }

        /* Hide search and notify panels when mobile panel is open */
        body.mobile-panel-open .map-controls #searchPanel,
        body.mobile-panel-open .map-controls #notifyPanel,
        body.mobile-panel-open .map-controls #riskScorePanel {
          display: none !important;
        }

        /* Position buttons: reset on left, notify on right when panel is open */
        body.mobile-panel-open .map-controls #resetBtn {
          order: 1;
        }

        body.mobile-panel-open .map-controls #themeBtn {
          order: 2;
        }

        body.mobile-panel-open .map-controls #searchToggleBtn {
          order: 3;
        }

        body.mobile-panel-open .map-controls #notifyToggleBtn {
          order: 4;
        }

        body.mobile-panel-open .map-controls #riskScoreToggleBtn {
          order: 5;
        }

        .control-btn {
          font-size: 10px;
          padding: 8px 10px;
        }

        .leaflet-popup-content {
          font-size: 12px;
          padding: 10px;
        }

        .leaflet-popup-content strong {
          font-size: 13px;
        }

        .info-item {
          padding: 8px 0;
        }

        .info-label {
          font-size: 9px;
        }

        .info-value {
          font-size: 11px;
        }
      }

      /* Mobile: hide legend for simpler experience */
      @media (max-width: 768px) {
        .legend {
          display: none !important;
        }
        /* Search panel and notify panel compacting */
        .map-controls #searchPanel,
        .map-controls #notifyPanel {
          padding: 4px 2px 4px 2px !important;
          gap: 2px !important;
          flex-wrap: wrap;
          font-size: 10px !important;
        }
        .select-control,
        .search-input {
          font-size: 10px !important;
          padding: 3px 6px !important;
          min-width: 40px;
          height: 28px !important;
        }
        .control-btn,
        .time-filter-btn {
          font-size: 9px !important;
          padding: 5px 7px !important;
          min-width: 22px;
          height: 28px !important;
          border-width: 1.5px !important;
        }
        /* Make action text smaller on mobile (PICK / NEAR ME / +/-) */
        #pickLocationBtn,
        #useMyLocationBtn,
        #notifyPickCenterBtn,
        #notifyUseMyLocationBtn,
        #searchRadiusMinus,
        #searchRadiusPlus,
        #notifyRadiusMinus,
        #notifyRadiusPlus {
          font-size: 8px !important;
          padding: 2px 6px !important;
          letter-spacing: 0.2px !important;
        }
        /* Ensure PICK buttons fit their text fully */
        #pickLocationBtn,
        #notifyPickCenterBtn {
          min-width: auto !important;
          width: auto !important;
          white-space: nowrap !important;
          padding: 3px 8px !important;
          line-height: 12px !important;
        }
        #searchPickedLocationText,
        #notifyPickedText {
          font-size: 9px !important;
          max-width: 70vw;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        /* Ensure search action buttons have enough room */
        #searchBtn {
          min-width: 48px !important;
          white-space: nowrap !important;
        }
        #clearSearchBtn {
          min-width: 64px !important;
          padding: 4px 10px !important;
          white-space: nowrap !important;
        }
        /* Ensure SUBSCRIBE button fits content */
        #notifySubmitBtn {
          min-width: auto !important;
          width: auto !important;
          max-width: none !important;
          white-space: nowrap !important;
          padding: 4px 10px !important;
          line-height: 12px !important;
        }
      }
